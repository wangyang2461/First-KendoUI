{"version":3,"file":"format-number.js","sources":["format-number.js"],"sourcesContent":["import { localeInfo } from '../cldr';\nimport standardNumberFormat from './standard-number-format';\nimport customNumberFormat from './custom-number-format';\n\nconst standardFormatRegExp = /^(n|c|p|e)(\\d*)$/i;\n\nfunction standardFormatOptions(format) {\n    const formatAndPrecision = standardFormatRegExp.exec(format);\n\n    if (formatAndPrecision) {\n        const options = {\n            style: \"decimal\"\n        };\n\n        let style = formatAndPrecision[1].toLowerCase();\n\n        if (style === \"c\") {\n            options.style = \"currency\";\n        }\n\n        if (style === \"p\") {\n            options.style = \"percent\";\n        }\n\n        if (style === \"e\") {\n            options.style = \"scientific\";\n        }\n\n        if (formatAndPrecision[2]) {\n            options.minimumFractionDigits = options.maximumFractionDigits = parseInt(formatAndPrecision[2], 10);\n        }\n\n        return options;\n    }\n}\n\nfunction getFormatOptions(format) {\n    let formatOptions;\n    if (typeof format === \"string\") {\n        formatOptions = standardFormatOptions(format);\n    } else {\n        formatOptions = format;\n    }\n\n    return formatOptions;\n}\n\nexport default function formatNumber(number, format = \"n\", locale = \"en\") {\n    if (number === undefined) {\n        return \"\";\n    }\n\n    if (!isFinite(number)) {\n        return number;\n    }\n\n    const info = localeInfo(locale);\n    const formatOptions = getFormatOptions(format);\n\n    let result;\n    if (formatOptions) {\n        const style = (formatOptions || {}).style || \"decimal\";\n        result = standardNumberFormat(number, Object.assign({}, info.numbers[style], formatOptions), info);\n    } else {\n        result = customNumberFormat(number, format, info);\n    }\n\n    return result;\n}\n"],"names":["const","let"],"mappings":"AAAA,SAAS,UAAU,QAAQ,SAAS,CAAC;AACrC,OAAO,oBAAoB,MAAM,0BAA0B,CAAC;AAC5D,OAAO,kBAAkB,MAAM,wBAAwB,CAAC;;AAExDA,GAAK,CAAC,oBAAoB,GAAG,mBAAmB,CAAC;;AAEjD,SAAS,qBAAqB,CAAC,MAAM,EAAE;IACnCA,GAAK,CAAC,kBAAkB,GAAG,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;IAE7D,IAAI,kBAAkB,EAAE;QACpBA,GAAK,CAAC,OAAO,GAAG;YACZ,KAAK,EAAE,SAAS;SACnB,CAAC;;QAEFC,GAAG,CAAC,KAAK,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;;QAEhD,IAAI,KAAK,KAAK,GAAG,EAAE;YACf,OAAO,CAAC,KAAK,GAAG,UAAU,CAAC;SAC9B;;QAED,IAAI,KAAK,KAAK,GAAG,EAAE;YACf,OAAO,CAAC,KAAK,GAAG,SAAS,CAAC;SAC7B;;QAED,IAAI,KAAK,KAAK,GAAG,EAAE;YACf,OAAO,CAAC,KAAK,GAAG,YAAY,CAAC;SAChC;;QAED,IAAI,kBAAkB,CAAC,CAAC,CAAC,EAAE;YACvB,OAAO,CAAC,qBAAqB,GAAG,OAAO,CAAC,qBAAqB,GAAG,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SACvG;;QAED,OAAO,OAAO,CAAC;KAClB;CACJ;;AAED,SAAS,gBAAgB,CAAC,MAAM,EAAE;IAC9BA,GAAG,CAAC,aAAa,CAAC;IAClB,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;QAC5B,aAAa,GAAG,qBAAqB,CAAC,MAAM,CAAC,CAAC;KACjD,MAAM;QACH,aAAa,GAAG,MAAM,CAAC;KAC1B;;IAED,OAAO,aAAa,CAAC;CACxB;;AAED,eAAe,SAAS,YAAY,CAAC,MAAM,EAAE,MAAY,EAAE,MAAa,EAAE,CAAvB;mCAAA,GAAG,GAAG,CAAQ;mCAAA,GAAG,IAAI;AAAG;IACvE,IAAI,MAAM,KAAK,SAAS,EAAE;QACtB,OAAO,EAAE,CAAC;KACb;;IAED,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;QACnB,OAAO,MAAM,CAAC;KACjB;;IAEDD,GAAK,CAAC,IAAI,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;IAChCA,GAAK,CAAC,aAAa,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;;IAE/CC,GAAG,CAAC,MAAM,CAAC;IACX,IAAI,aAAa,EAAE;QACfD,GAAK,CAAC,KAAK,GAAG,CAAC,aAAa,IAAI,EAAE,CAAC,CAAC,KAAK,IAAI,SAAS,CAAC;QACvD,MAAM,GAAG,oBAAoB,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,aAAa,CAAC,EAAE,IAAI,CAAC,CAAC;KACtG,MAAM;QACH,MAAM,GAAG,kBAAkB,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;KACrD;;IAED,OAAO,MAAM,CAAC;CACjB;"}